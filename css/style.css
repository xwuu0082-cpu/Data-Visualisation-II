:root{
  --bg:#ffffff;--bg-subtle:#f8fafc;--card:#ffffff;--border:#e5e7eb;--shadow:0 6px 20px rgba(15,23,42,.07);
  --fg:#111827;--fg-muted:#374151;--fg-subtle:#6b7280;--brand:#0ea5e9;--brand-strong:#0284c7;--accent:#2563eb;--accent-strong:#1d4ed8;
  --font-sans:"Inter","Open Sans","Roboto",system-ui,-apple-system,"Segoe UI",Helvetica,Arial,sans-serif;
  --font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,"Courier New",monospace;
  --container:1100px;--radius-lg:12px;--radius-md:10px;--radius-sm:8px;
  --space-1:.25rem;--space-2:.5rem;--space-3:.75rem;--space-4:1rem;--space-5:1.25rem;--space-6:1.5rem;--space-7:2rem;--space-8:2.5rem;
  --measure:72ch
}
@media (prefers-color-scheme:dark){
  :root{
    --bg:#0b1220;--bg-subtle:#0f172a;--card:#0f172a;--border:#1f2937;--shadow:0 10px 28px rgba(2,6,23,.5);
    --fg:#e5e7eb;--fg-muted:#cbd5e1;--fg-subtle:#94a3b8;--brand:#22d3ee;--brand-strong:#06b6d4;--accent:#60a5fa;--accent-strong:#3b82f6
  }
}
@media (prefers-contrast:more){
  :root{--border:#94a3b8}
}
*,*::before,*::after{box-sizing:border-box}
html{text-size-adjust:100%}
body{
  margin:0;background:var(--bg);color:var(--fg);font-family:var(--font-sans);
  line-height:1.65;font-size:clamp(15px,.9vw+12px,17px);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility
}
::selection{background:color-mix(in oklab,var(--accent) 18%, transparent);color:inherit}
img,svg,video,canvas{display:block;max-width:100%;height:auto}
.container{max-width:var(--container);margin-inline:auto;padding:clamp(18px,3vw,40px) clamp(14px,2.6vw,20px);overflow-x:clip}
h1,h2,h3{color:var(--fg);margin:0 0 var(--space-3);letter-spacing:.2px;text-wrap:balance}
h1{font-weight:800;font-size:clamp(28px,2.6vw+12px,38px);text-align:center;margin-bottom:var(--space-5)}
.lead{margin:0 auto var(--space-7);max-width:var(--measure);text-align:center;color:var(--fg-subtle);font-size:clamp(16px,.55vw+14px,18.5px);text-wrap:pretty}
h2{font-weight:750;font-size:clamp(21px,1vw+18px,27px);margin-top:clamp(26px,4vw,52px);padding-left:12px;border-left:5px solid var(--accent)}
h3{font-weight:700;font-size:clamp(18px,.75vw+14px,21px);color:var(--accent);margin-top:var(--space-5)}
p{color:var(--fg-muted);margin:0 0 var(--space-4);max-width:var(--measure);text-wrap:pretty}
.meta{color:var(--fg-subtle);font-size:.95rem}
.chart{
  background:var(--card);border:1px solid var(--border);border-radius:var(--radius-lg);
  padding:clamp(14px,1.9vw,20px) clamp(14px,2.2vw,22px) clamp(10px,1.7vw,16px);
  margin:clamp(22px,3.8vw,40px) 0;box-shadow:var(--shadow)
}
.chart-title{font-weight:700;font-size:clamp(18px,.85vw+16px,22px);color:var(--fg);margin-bottom:2px}
.chart-subtitle{color:var(--fg-subtle);font-size:clamp(14px,.45vw+12px,16px);margin-bottom:var(--space-3)}
figure{margin:var(--space-2) 0}
figcaption{color:var(--fg-subtle);font-size:.95rem;margin-top:var(--space-3);max-width:var(--measure)}
.vis{width:100%;display:grid;place-items:center;overflow:hidden;min-height:clamp(260px,40vh,520px)}
.vis>.vega-embed,.vis>svg,.vega-embed svg{width:100%!important;height:auto!important}
.vis[data-size="short"]{min-height:clamp(220px,34vh,440px)}
.vis[data-size="tall"]{min-height:clamp(320px,46vh,580px)}
#vis-scatter{--scatter-aspect:4/3;--scatter-min:240px;--scatter-max:500px;aspect-ratio:var(--scatter-aspect);min-height:var(--scatter-min);max-height:var(--scatter-max)}
@media (min-width:992px){#vis-scatter{--scatter-aspect:16/10}}
#vis-scatter .vega-embed,#vis-scatter svg{width:100%!important;height:auto!important;max-height:var(--scatter-max)!important;overflow:visible}
.source{color:var(--fg-subtle);font-size:.92rem;margin-top:var(--space-2);text-align:right}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:var(--space-3)}
button,.btn{
  -webkit-appearance:none;appearance:none;background:var(--accent);color:#fff;border:0;border-radius:999px;
  padding:9px 16px;font-weight:700;font-size:15px;cursor:pointer;
  transition:transform .15s ease,box-shadow .2s ease,background .2s ease;box-shadow:0 6px 16px rgba(37,99,235,.22)
}
button:hover{background:var(--accent-strong);transform:translateY(-1px)}
button:active{transform:translateY(0)}
button:focus-visible{outline:3px solid color-mix(in oklab,var(--accent) 70%, white);outline-offset:2px;box-shadow:0 0 0 6px color-mix(in oklab,var(--accent) 25%, transparent)}
select{
  appearance:none;background:var(--bg);color:var(--fg);border:1px solid var(--border);border-radius:var(--radius-sm);
  padding:8px 34px 8px 12px;font-size:15px;line-height:1.2;
  background-image:linear-gradient(45deg,transparent 50%,var(--fg-subtle) 50%),linear-gradient(135deg,var(--fg-subtle) 50%,transparent 50%),linear-gradient(to right,transparent,transparent);
  background-position:calc(100% - 18px) calc(1.05em),calc(100% - 12px) calc(1.05em),100% 0;background-size:6px 6px,6px 6px,2.2em 2.2em;background-repeat:no-repeat
}
select:focus-visible{outline:3px solid color-mix(in oklab,var(--brand) 65%, white);outline-offset:2px}
.center{text-align:center}
.highlight{color:#f59e0b;font-weight:800}
hr{border:none;border-top:1px solid var(--border);margin:var(--space-7) 0}
.grid{display:grid;grid-template-columns:1fr;gap:var(--space-5)}
@media (min-width:900px){.grid{grid-template-columns:1.2fr .8fr}}
@media (max-width:768px){
  h1{font-size:clamp(26px,6.2vw,32px)}
  .chart{padding:12px 12px 10px;box-shadow:0 3px 10px rgba(0,0,0,.06)}
  .chart-title{font-size:18px}.chart-subtitle{font-size:14px}
  .vis{min-height:300px}
}
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.001ms!important;animation-iteration-count:1!important;transition-duration:.001ms!important}
}
@media print{
  :root{--bg:#fff;--card:#fff;--border:#cfcfcf;--fg:#000;--fg-muted:#111;--fg-subtle:#333;--shadow:none}
  body{color:#000;background:#fff;font-size:12pt;line-height:1.5}
  .container{max-width:none;padding:12mm}
  .chart{box-shadow:none!important;border:1px solid var(--border);break-inside:avoid-page;page-break-inside:avoid;margin:8mm 0}
  .vis{min-height:0}
  a::after{content:" (" attr(href) ")";font-size:9pt;color:#444}
}
.vega-actions{display:none!important}
.vega-embed{overflow-x:hidden}
.sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
