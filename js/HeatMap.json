{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Heatmap showing public hospitals per 100,000 residents across Australian states and territories, 2001–2024.",
  "data": {
    "url": "https://raw.githubusercontent.com/xwuu0082-cpu/Data-Visualisation-II/refs/heads/main/data/state_summary_all_years_ready_public_2001_2025.csv",
    "format": { "type": "csv" }
  },
  "transform": [
    { "filter": "toNumber(datum.year) >= 2001 && toNumber(datum.year) <= 2024" },
    { "filter": "datum.state_name != 'Australia' && datum.state_name != 'Other Territories'" }
  ],
  "width": 920,
  "height": 580,
  "mark": { "type": "rect", "stroke": "white", "strokeWidth": 0.5 },
  "encoding": {
    "x": {
      "field": "year",
      "type": "ordinal",
      "title": "Year",
      "axis": { "labelAngle": 0 }
    },
    "y": {
      "field": "state_name",
      "type": "nominal",
      "title": "State/Territory",
      "sort": [
        "New South Wales",
        "Victoria",
        "Queensland",
        "South Australia",
        "Western Australia",
        "Tasmania",
        "Northern Territory",
        "Australian Capital Territory"
      ]
    },
    "color": {
      "field": "hospitals_per_100k",
      "type": "quantitative",
      "title": "Public Hospitals per 100,000 Residents",
      "scale": { "scheme": { "name": "cividis", "extent": [0.25, 1] } },
      "legend": {
        "orient": "right",
        "gradientLength": 460,       // 竖向色带的“高度”
        "gradientThickness": 20,     // 竖向色带的“宽度/厚度”
        "titleLimit": 1000,          // 不截断标题
        "labelLimit": 1000,          // 不截断刻度文本
        "labelOverlap": false
      }
    },
    "tooltip": [
      { "field": "state_name", "type": "nominal", "title": "State/Territory" },
      { "field": "year", "type": "ordinal", "title": "Year" },
      { "field": "percent_65plus", "type": "quantitative", "title": "Aged 65+ (%)", "format": ".1f" },
      { "field": "hospitals_count", "type": "quantitative", "title": "Public Hospitals (Total)", "format": "," },
      { "field": "hospitals_per_100k", "type": "quantitative", "title": "Hospitals per 100,000 Residents", "format": ".2f" }
    ]
  },
  "layer": [
    { "mark": "rect" },
    {
      "data": {
        "values": [
          {
            "note": "Observation: The Australian Capital Territory and Victoria exhibit progressive darkening over time (improving availability), whereas Tasmania and the Northern Territory remain comparatively light, indicating persistent capacity gaps."
          }
        ]
      },
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "top",
        "dx": 8,
        "dy": 15,
        "fontSize": 12,
        "fill": "#374151"
      },
      "encoding": {
        "x": { "value": 0, "scale": null },
        "y": { "value": 505, "scale": null },
        "text": { "field": "note" }
      }
    },
    {
      "data": {
        "values": [
          {
            "note": "Data Sources: Australian Institute of Health and Welfare (AIHW); Australian Bureau of Statistics (ABS), 2001–2025."
          }
        ]
      },
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "bottom",
        "dx": 8,
        "dy": -6,
        "fontSize": 11,
        "fill": "#6b7280"
      },
      "encoding": {
        "x": { "value": 0, "scale": null },
        "y": { "value": 545, "scale": null },
        "text": { "field": "note" }
      }
    }
  ],
  "title": {
    "text": "Patterns in Public Hospital Availability Across States and Territories (2001–2024)",
    "subtitle": "Each cell denotes public hospitals per 100,000 residents. Darker shading indicates higher availability.",
    "fontSize": 20,
    "subtitleFontSize": 13,
    "anchor": "start"
  },
  "config": {
    "view": { "stroke": "transparent" },
    "axis": { "labelFontSize": 12, "titleFontSize": 12 },
    "legend": { "titleFontSize": 12, "labelFontSize": 12, "padding": 10 },
    "background": "white"
  }
}
